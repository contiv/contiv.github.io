!function(){var t=function(t){this.engine=t,this._chain=[],this._updateTimer=this._updateTimer.bind(this),this._cycle=this._cycle.bind(this)};t.prototype._running=!1,t.prototype._updateTimer=function(t){this._timer+=t,this._timer>=this._timerMax&&(this.resetTimer(),this._cycle())},t.prototype.resetTimer=function(){return this.engine.updateChainTimer=void 0,this._timer=0,this._timerMax=0,this},t.prototype.start=function(){return this._running||!this._chain.length?this:(this._running=!0,this._cycle())},t.prototype.reset=function(){return this._running?(this.resetTimer(),this._timer=0,this._running=!1,this):this},t.prototype._cycle=function(){var t;return this._chain.length?(t=this._chain.shift(),"function"===t.type?(t.func.apply(t.scope,t.args),t=null,this._cycle()):("wait"===t.type&&(this.resetTimer(),this._timerMax=t.time/1e3,this.engine.updateChainTimer=this._updateTimer,t=null),this)):this.reset()},t.prototype.then=t.prototype.exec=function(t,e,n){return this._chain.push({type:"function",func:t,scope:e||window,args:n||[]}),this.start()},t.prototype.wait=function(t){return this._chain.push({type:"wait",time:t}),this.start()},window.Chainable=t}();