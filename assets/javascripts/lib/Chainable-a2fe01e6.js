!function(){var e=function(e){this.engine=e,this._chain=[],this._updateTimer=this._updateTimer.bind(this),this._cycle=this._cycle.bind(this)};e.prototype._running=!1,e.prototype._updateTimer=function(e){this._timer+=e,this._timer>=this._timerMax&&(this.resetTimer(),this._cycle())},e.prototype.resetTimer=function(){return this.engine.updateChainTimer=void 0,this._timer=0,this._timerMax=0,this},e.prototype.start=function(){return this._running||!this._chain.length?this:(this._running=!0,this._cycle())},e.prototype.reset=function(){return this._running?(this.resetTimer(),this._timer=0,this._running=!1,this):this},e.prototype._cycle=function(){var e;return this._chain.length?(e=this._chain.shift(),"function"===e.type?(e.func.apply(e.scope,e.args),e=null,this._cycle()):("wait"===e.type&&(this.resetTimer(),this._timerMax=e.time/1e3,this.engine.updateChainTimer=this._updateTimer,e=null),this)):this.reset()},e.prototype.then=e.prototype.exec=function(e,t,n){return this._chain.push({type:"function",func:e,scope:t||window,args:n||[]}),this.start()},e.prototype.wait=function(e){return this._chain.push({type:"wait",time:e}),this.start()},window.Chainable=e}();