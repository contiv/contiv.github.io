<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Storage">

    <link rel="shortcut icon" href="/assets/images/favicon.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <title>Storage - Contiv</title>

    <link href="/assets/stylesheets/application-2b39eabd.css" rel="stylesheet"/>

    <!--[if lt IE 9]><script src="/assets/javascripts/html5shiv-65a8779a.js"></script><script src="/assets/javascripts/respond.min-1eb35b04.js"></script><![endif]-->

    
  </head>

  <body id="page-Storage" class=" page-Storage layout-documents page-sub">

<div id="header" class="navbar-static-top">
  <div class="container">
    <div class="row">
      
        <div class="navbar-header">
          <div class="navbar-brand">
              <a class="logo" href="/">Contiv</a>
            </a>
          </div>
          
        </div>
        <div class="buttons hidden-xs">
          <nav role="navigation">
            <ul class="main-links nav navbar-nav navbar-left">
              <li class="first li-under"><a href="/documents/index.html">Documentation</a></li>
              <li class="li-under"><a href="/articles/index.html">Articles</a></li>
              <li class="li-under"><a href="https://github.com/contiv" target="_blank">
                        GitHub
                        <i class="fa fa-github fa-lg"></i>
                        </a></li>
                    <li class="li-under"><a href="https://contiv.herokuapp.com" target="_blank">
                        Slack
                        <i class="fa fa-slack fa-lg"></i>
                        </a></li>
                    <li><a href="https://twitter.com/projectcontiv" target="_blank">
                        Twitter
                        <i class="fa fa-twitter fa-lg"></i>
                        </a></li>
            </ul>
          </nav>
        </div>
      
    </div>
  </div>
</div>


<div class="sidebar-overlay"></div>


<aside id="sidebar" class="sidebar sidebar-default sidebar-fixed-right" role="navigation">
    
    <div class="sidebar-header header-cover">
        
        <div class="sidebar-image">
            <img src="/assets/images/logo3-a96fcb82.png" width="49px" height="56px">
        </div>
    </div>

    
    <ul class="main nav sidebar-nav">
        <li class="first"><a href="/intro/index.html">Intro</a></li>
        <li class=""><a href="/docs/index.html">Docs</a></li>
    </ul>
    <div class="divider"></div>
    
    <ul class="external nav sidebar-nav">
        <li class=""><a class="v-btn gray sml" href="https://github.com/contiv"><svg id="svg-download" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" style="enable-background:new 0 0 14 14;">
  <style>
  </style>
  <path class="" d="M13,0H1C0.5,0,0,0.5,0,1v12c0,0.5,0.5,1,1,1h4.7c0,0,0,0,0-0.1c0-0.2,0-0.6,0-1.1c-1.8,0.4-2.2-0.9-2.2-0.9
    c-0.3-0.8-0.7-1-0.7-1c-0.6-0.4,0-0.4,0-0.4c0.7,0,1,0.7,1,0.7c0.6,1,1.5,0.7,1.9,0.5c0.1-0.4,0.2-0.7,0.4-0.9c-1.5-0.2-3-0.7-3-3.2
    c0-0.7,0.3-1.3,0.7-1.8C3.7,5.8,3.5,5.1,3.9,4.2c0,0,0.6-0.2,1.8,0.7c0.5-0.1,1.1-0.2,1.6-0.2c0.6,0,1.1,0.1,1.6,0.2
    c1.3-0.8,1.8-0.7,1.8-0.7c0.4,0.9,0.1,1.6,0.1,1.7c0.4,0.5,0.7,1,0.7,1.8c0,2.5-1.5,3.1-3,3.2C8.7,11.1,9,11.5,9,12.1
    c0,0.9,0,1.6,0,1.8c0,0,0,0,0,0.1h4c0.5,0,1-0.5,1-1V1C14,0.5,13.5,0,13,0z"/>
</svg>
GitHub</a></li>
    </ul>
</aside>


<div class="container">
	<div class="row">
		<div class="col-md-3 col-sm-3 col-xs-12">
					<div class="docs-sidebar hidden-print affix-top" role="complementary">
			<hr>
			<h3>User Guide</h3>
			<ul class="nav docs-sidenav">
				<li>
					<a href="/documents/gettingStarted/index.html">Getting Started</a>
					<ul class="nav">
						<li>
							<a class="hasChildren" href="/documents/gettingStarted/networking/index.html">Networking</a>
							<ul class="nav">
								<li>
									<a class="hasChildren" href="/documents/gettingStarted/networking/index.html#UsingVagrant">Single Machine</a>
									<ul class="subnav">
										<li>
												<a href="/documents/gettingStarted/networking/swarm.html">Docker Swarm</a>
										</li>
										<li>
												<a href="/documents/gettingStarted/networking/k8s.html">Kubernetes</a>
										</li>
										<li>
												<a href="/documents/gettingStarted/networking/mesos.html">Mesos</a>
										</li>
										<li>
												<a href="/documents/gettingStarted/networking/nomad.html">Nomad</a>
										</li>
									</ul>
								</li>
								<li>
									<a class="hasChildren" href="/documents/gettingStarted/networking/index.html#WithNetworkedServers">Multiple Servers</a>
									<ul class="subnav">
										<li>
												<a href="/documents/gettingStarted/networking/install-swarm.html">Docker Swarm</a>
										</li>
										<li>
												<a href="/documents/gettingStarted/networking/install-k8s.html">Kubernetes</a>
										</li>
										<li>
												<a href="/documents/gettingStarted/networking/bgp.html">BGP</a>
										</li>
										<li>
												<a href="/documents/gettingStarted/networking/aci.html">Cisco ACI</a>
										</li>
									</ul>
								</li>
							</ul>
						</li>
						<li>
							<a href="/documents/gettingStarted/storage/storage.html">Storage </a>
						</li>
						<li>
							<a class="hasChildren" href="/documents/gettingStarted/cluster/index.html">Cluster </a>
							<ul class="subnav">
								<li>
										<a href="/documents/gettingStarted/cluster/vagrant.html">Single Machine</a>
								</li>
								<li>
										<a href="/documents/gettingStarted/cluster/baremetal.html">Multiple Servers</a>
								</li>
							</ul>
						</li>
					</ul>
				</li>
				<li>
					<a href="/documents/networking/index.html">Networking</a>
					<ul class="nav">
						<li>
								<a href="/documents/networking/features.html">Features</a>
						</li>
						<li>
								<a href="/documents/networking/concepts.html">Concepts and Terminology</a>
						</li>
						<li>
								<a href="/documents/networking/policies.html">Policies</a>
						</li>
						<li>
								<a href="/documents/networking/services.html">Service Loadbalancing</a>
						</li>
						<li>
								<a class="hasChildren" href="/documents/networking/physical-networks.html">Physical Networks</a>
								<ul class="nav">
									<li>
											<a href="/documents/networking/bgp.html">L3 Routed Networks</a>
									</li>
									<li>
											<a href="/documents/networking/l2-vlan.html">L2 Bridged Networks</a>
									</li>
									<li>
											<a href="/documents/networking/aci_ug.html">Cisco ACI</a>
									</li>
								</ul>
						</li>
						<li>
								<a href="/documents/networking/ipam.html">IPAM and Service Discovery</a>
						</li>
						<li>
								<a href="/documents/networking/ipv6.html">IPv6</a>
						</li>
					</ul>
				</li>
				<li class="active">
					<a href="/documents/storage/index.html">Storage</a>
					<ul class="nav">
						<li>
								<a href="/documents/storage/architecture.html">Architecture</a>
						</li>
						<li>
								<a href="/documents/storage/configuration.html">Configuration</a>
						</li>
						<li>
								<a href="/documents/storage/containers.html">Creating a Container with a Volume</a>
						</li>
						<li class="active">
								<a href="/documents/storage/volcli.html">Volcli Reference</a>
						</li>
					</ul>
				</li>
				<li>
					<a href="/documents/cluster/index.html">Cluster</a>
					<ul class="nav">
						<li>
								<a href="/documents/cluster/concepts.html">Concepts and Terminology</a>
						</li>
						<li>
								<a href="/documents/cluster/node-lifecycle.html">Node Lifecycle Management</a>
						</li>
					</ul>
				</li>
			</ul>
			<hr><p>
			<h3>Tutorials and Talks</h3>
				<ul class="nav docs-sidenav">
					<li>
						<a href="/documents/tutorials/index.html">Tutorials</a>
						<ul class="nav">
							<li>
									<a href="/documents/tutorials/container-101.html">Container Networking Tutorial</a>
							</li>
							<li>
									<a href="/documents/tutorials/contiv-compose.html">Policies with Networking</a>
							</li>
						</ul>
					</li>
					<li>
						<a href="/documents/demos/index.html">Demonstration Videos</a>
					</li>
					<li>
						<a href="/documents/talks/index.html">Community Talks</a>
					</li>
				</ul>
			<hr><p>
			<h3>Examples</h3>
				<ul class="nav docs-sidenav">
					<ul class="subnav">
						<li>
							<a href="/documents/samples/index.html">Docker Compose Examples</a>
						</li>
						<li>
							<a href="/documents/samples/index.html">Kubernetes Examples</a>
						</li>
						<li>
							<a href="/documents/samples/mcast.html">Multicast Examples</a>
						</li>
						<li>
							<a href="/documents/samples/nomad.html">Nomad Examples</a>
						</li>
					</ul>
				</ul>
			<hr><p>
			<h3>Reference</h3>
				<ul class="nav docs-sidenav">
					<ul class="subnav">
						<li><a href="https://godoc.org/github.com/contiv/contivmodel/client" target="_blank">Network API Reference</a><br></li>
						<li><a href="https://godoc.org/github.com/contiv/volplugin/config" target="_blank">Storage API Reference</a><br></li>
						<li><a href="https://godoc.org/github.com/contiv/cluster" target="_blank">Cluster API Reference</a><br></li>
					</ul>
				</ul>
			<hr><p>
		</div>

		</div>  
		<div id="main-content" class="col-sm-9 col-md-9 col-xs-12" role="main">
			<div class="bs-docs-section">
				
	<h1>Contiv Storage Command Reference</h1>
<p>The <code>volcli</code> command invokes API calls on  the <code>apiserver</code> service, which in turn 
is referenced by the <code>volplugin</code> component for local management of storage. 
Think of <code>volcli</code> as a tap into the control plane.</p>

<h2>Top-Level Commands</h2>
<p>These commands present CRUD options on their respective sub-sections:</p>

<ul>
<li><a name="volcli_global"/><a href="#volcli_global"><code>volcli global</code></a> manipulates global configuration.
</li>
<li><a name="volcli_policy"/><a href="#volcli_policy"><code>volcli policy</code></a> manipulates policy configuration.
</li>
<li><a name="volcli_volume"/><a href="#volcli_volume"><code>volcli volume</code></a> manipulates volumes.
</li>
<li><a name="volcli_mount"/><a href="#volcli_mount"><code>volcli mount</code></a> manipulates mounts.
</li>
<li><code>volcli help</code> prints the help messages.

<ul>
<li>For each subcommand, <a name="volcli_help_subcommand_"/><a href="#volcli_help_subcommand_"><code>volcli help [subcommand]</code></a> prints the help message
for [subcommand]. For multi-level commands, <code>volcli [subcommand] help
[subcommand]</code> provides appropriate help. Appending <code>--help</code> to any command prints the
help as well.
</li>
</ul>
</li>
</ul>

<h2>Global Commands</h2>

<ul>
<li><a name="volcli_global_upload"/><a href="#volcli_global_upload"><code>volcli global upload</code></a> takes JSON global configuration from the standard input.
</li>
<li><a name="volcli_global_get"/><a href="#volcli_global_get"><code>volcli global get</code></a> retrieves the JSON global configuration.
</li>
</ul>

<h2>Tenant Commands</h2>
<p>Typing <code>volcli policy</code> without arguments prints help for these commands.</p>

<ul>
<li><a name="volcli_policy_upload"/><a href="#volcli_policy_upload"><code>volcli policy upload</code></a> takes a policy name and JSON configuration from standard input.
</li>
<li><a name="volcli_policy_delete"/><a href="#volcli_policy_delete"><code>volcli policy delete</code></a> removes a policy. The policy&#39;s volumes and mounts are not removed.
</li>
<li><a name="volcli_policy_get"/><a href="#volcli_policy_get"><code>volcli policy get</code></a> displays the JSON configuration for a policy.
</li>
<li><a name="volcli_policy_list"/><a href="#volcli_policy_list"><code>volcli policy list</code></a> lists the policies contained in etcd.
</li>
</ul>

<h2>Volume Commands</h2>
<p>Typing <code>volcli volume</code> without arguments prints help for these commands.</p>

<ul>
<li><a name="volcli_volume_create"/><a href="#volcli_volume_create"><code>volcli volume create</code></a> forcefully creates a volume just as if it were created with
<code>docker volume create</code>. Requires a policy and volume name.
</li>
<li><a name="volcli_volume_get"/><a href="#volcli_volume_get"><code>volcli volume get</code></a> retrieves the volume configuration for a given policy/volume combination.
</li>
<li><a name="volcli_volume_list"/><a href="#volcli_volume_list"><code>volcli volume list</code></a> lists all the volumes for a provided policy.
</li>
<li><a name="volcli_volume_list_all"/><a href="#volcli_volume_list_all"><code>volcli volume list-all</code></a> lists all volumes, across policies.
</li>
<li><a name="volcli_volume_remove"/><a href="#volcli_volume_remove"><code>volcli volume remove</code></a> removes a volume given a policy/volume
combination, deleting the underlying data.  This operation may fail if the
device is mounted, or expected to be mounted.
</li>
<li><a name="volcli_volume_force_remove"/><a href="#volcli_volume_force_remove"><code>volcli volume force-remove</code></a>, given a policy/volume combination, removes
the data from etcd but does not perform any other operations. Use this option with
caution.
</li>
<li><a name="volcli_volume_runtime_get"/><a href="#volcli_volume_runtime_get"><code>volcli volume runtime get</code></a> retrieves the runtime policy for a given volume.
</li>
<li><a name="volcli_volume_runtime_upload"/><a href="#volcli_volume_runtime_upload"><code>volcli volume runtime upload</code></a> uploads (via stdin) the runtime policy for a given volume.
</li>
</ul>

<h2>Mount Commands</h2>
<p>Typing <code>volcli mount</code> without arguments prints help for these commands.</p>
<p><em>Note:</em> <code>volcli mount</code> cannot control mounts - this is managed by
<code>volplugin</code> which runs on each host.</p>

<ul>
<li><a name="volcli_mount_list"/><a href="#volcli_mount_list"><code>volcli mount list</code></a> lists all known mounts in etcd.
</li>
<li><a name="volcli_mount_get"/><a href="#volcli_mount_get"><code>volcli mount get</code></a> obtains specific information about a mount from etcd.
</li>
<li><a name="volcli_mount_force_remove"/><a href="#volcli_mount_force_remove"><code>volcli mount force-remove</code></a> removes the contents from etcd, but does not
attempt to perform any unmounting. This is useful for removing mounts that
fail for some reason (e.g., host failure, which is not currently satsified by
volplugin).
</li>
</ul>

<h2>Use Commands</h2>
<p>Use commands control the locking system and also provide information about what
is being used by what. Use these commands with caution as they can affect the
stability of the cluster if used improperly.</p>

<ul>
<li><a name="volcli_use_list"/><a href="#volcli_use_list"><code>volcli use list</code></a> lists all uses (mounts, snapshots) in effect.
</li>
<li><a name="volcli_use_get"/><a href="#volcli_use_get"><code>volcli use get</code></a> gets information on a specific use lock.
</li>
<li><a name="volcli_use_force_remove"/><a href="#volcli_use_force_remove"><code>volcli use force-remove</code></a> forces a lock open for a given volume.
</li>
<li><a name="volcli_use_exec"/><a href="#volcli_use_exec"><code>volcli use exec</code></a> waits for a lock to free, then executes the supplied command.
</li>
</ul>


			</div>
		</div>
	</div>
</div>